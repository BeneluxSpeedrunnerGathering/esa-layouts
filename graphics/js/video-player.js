(()=>{"use strict";var e={315:(e,t,i)=>{var o=i(5803),n=i(5925);function r(e){return(0,n.yh)((function(t,i){t.computed=t.computed||{},t.computed[i]={cache:!1,get:function(){return this.$refs[e||i]}}}))}i(4807),i(7023),i(5654),i(779),i(8793);var a=i(8586),l=d("computed",a.rn),s=(d("computed",a.Se),d("methods",a.nv),d("methods",a.OI));function d(e,t){function i(i,o){return(0,n.yh)((function(n,r){n[e]||(n[e]={});var a,l=((a={})[r]=i,a);n[e][r]=void 0!==o?t(o,l)[r]:t(l)[r]}))}return function(e,t){if("string"==typeof t){var o=t,n=e;return i(o,void 0)(n,o)}return i(e,function(e){var t=e&&e.namespace;if("string"==typeof t)return"/"!==t[t.length-1]?t+"/":t}(t))}}var u=i(8138),c=i.n(u),p=function(e,t,i,o){var n,r=arguments.length,a=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(a=(r<3?n(a):r>3?n(t,i,a):n(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},h=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function a(e){try{s(o.next(e))}catch(e){r(e)}}function l(e){try{s(o.throw(e))}catch(e){r(e)}}function s(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,l)}s((o=o.apply(e,t||[])).next())}))};let v=class extends o.Z{constructor(){super(...arguments),this.playlist=[],this.video=null,this.index=0}playNextVideo(){return h(this,void 0,void 0,(function*(){const e=this.videos.find((e=>e.sum===this.playlist[this.index]));e?(this.video=e,this.playerSrc.src=e.url,this.playerSrc.type=`video/${e.ext.toLowerCase().replace(".","")}`,this.player.load(),this.player.play(),this.updateCurrent(e.sum)):(this.index+=1,this.playNextVideo())}))}videoEnded(){this.video&&this.updatePlayCount(this.video.sum),this.playlist.length-1>this.index?(this.index+=1,this.playNextVideo()):(this.clearPlaylist(),nodecg.sendMessage("videoPlayerFinished"))}stopVideo(){this.updateCurrent(),this.video=null,this.player.pause(),this.playerSrc.removeAttribute("src"),this.playerSrc.removeAttribute("type"),this.player.load()}startPlaylist(){return h(this,void 0,void 0,(function*(){this.videoPlayer.playlist.length?(this.index=0,this.playlist=c()(this.videoPlayer.playlist),this.playNextVideo()):(yield new Promise((e=>window.setTimeout(e,2e3))),nodecg.sendMessage("videoPlayerFinished"))}))}stopPlaylist(){this.index=0,this.playlist.length=0}mounted(){const e=window.obsstudio;e&&(e.onActiveChange=e=>{e?this.startPlaylist():(this.stopVideo(),this.stopPlaylist())}),this.player.addEventListener("ended",this.videoEnded)}};p([l],v.prototype,"videos",void 0),p([l],v.prototype,"videoPlayer",void 0),p([s],v.prototype,"updatePlayCount",void 0),p([s],v.prototype,"updateCurrent",void 0),p([s],v.prototype,"clearPlaylist",void 0),p([r("VideoPlayer")],v.prototype,"player",void 0),p([r("VideoPlayerSrc")],v.prototype,"playerSrc",void 0),v=p([n.ZP],v);const y=v,f=(0,i(5440).Z)(y,(function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("video",{directives:[{name:"show",rawName:"v-show",value:e.video,expression:"video"}],ref:"VideoPlayer",style:{display:"block",width:"100vw",height:"100vh"}},[i("source",{ref:"VideoPlayerSrc"})])}),[],!1,null,null,null).exports;o.Z.use(a.ZP);const P={videoPlayer:nodecg.Replicant("videoPlayer"),videos:nodecg.Replicant("assets:videos")},g=new a.ZP.Store({state:{},mutations:{setState(e,{name:t,val:i}){o.Z.set(e,t,i)},updateCurrent(e,t){void 0!==P.videoPlayer.value&&(P.videoPlayer.value.current=t||null)},updatePlayCount(e,t){void 0!==P.videoPlayer.value&&t&&(P.videoPlayer.value.plays[t]?P.videoPlayer.value.plays[t]+=1:P.videoPlayer.value.plays[t]=1)},clearPlaylist(){void 0!==P.videoPlayer.value&&(P.videoPlayer.value.playlist.length=0)}}});var m,x,w,b;Object.keys(P).forEach((e=>{P[e].on("change",(t=>{g.commit("setState",{name:e,val:c()(t)})}))})),(m=void 0,x=void 0,w=void 0,b=function*(){return yield NodeCG.waitForReplicants(...Object.keys(P).map((e=>P[e]))),g},new(w||(w=Promise))((function(e,t){function i(e){try{n(b.next(e))}catch(e){t(e)}}function o(e){try{n(b.throw(e))}catch(e){t(e)}}function n(t){var n;t.done?e(t.value):(n=t.value,n instanceof w?n:new w((function(e){e(n)}))).then(i,o)}n((b=b.apply(m,x||[])).next())}))).then((e=>{new o.Z({store:e,el:"#App",render:e=>e(f)})}))},779:(e,t,i)=>{"undefined"!=typeof Reflect&&Reflect.getMetadata}},t={};function i(o){if(t[o])return t[o].exports;var n=t[o]={exports:{}};return e[o](n,n.exports,i),n.exports}i.m=e,i.x=e=>{},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={516:0},t=[[315,947,539]],o=e=>{},n=(n,r)=>{for(var a,l,[s,d,u,c]=r,p=0,h=[];p<s.length;p++)l=s[p],i.o(e,l)&&e[l]&&h.push(e[l][0]),e[l]=0;for(a in d)i.o(d,a)&&(i.m[a]=d[a]);for(u&&u(i),n&&n(r);h.length;)h.shift()();return c&&t.push.apply(t,c),o()},r=self.webpackChunk=self.webpackChunk||[];function a(){for(var o,n=0;n<t.length;n++){for(var r=t[n],a=!0,l=1;l<r.length;l++){var s=r[l];0!==e[s]&&(a=!1)}a&&(t.splice(n--,1),o=i(i.s=r[0]))}return 0===t.length&&(i.x(),i.x=e=>{}),o}r.forEach(n.bind(null,0)),r.push=n.bind(null,r.push.bind(r));var l=i.x;i.x=()=>(i.x=l||(e=>{}),(o=a)())})(),i.x()})();