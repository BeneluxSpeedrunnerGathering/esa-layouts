(()=>{"use strict";var e={6260:(e,t,n)=>{var i=n(5803),r=n(9459),o=n(2659),a=n(5925),s=n(8586),l=p("computed",s.rn),c=(p("computed",s.Se),p("methods",s.nv));function p(e,t){function n(n,i){return(0,a.createDecorator)((function(r,o){r[e]||(r[e]={});var a,s=((a={})[o]=n,a);r[e][o]=void 0!==i?t(i,s)[o]:t(s)[o]}))}return function(e,t){if("string"==typeof t){var i=t,r=e;return n(i,void 0)(r,i)}return n(e,function(e){var t=e&&e.namespace;if("string"==typeof t)return"/"!==t[t.length-1]?t+"/":t}(t))}}p("methods",s.OI);var d,u=n(4048),f=n.n(u),v=new Uint8Array(16);function g(){if(!d&&!(d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return d(v)}const m=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,y=function(e){return"string"==typeof e&&m.test(e)};for(var b=[],h=0;h<256;++h)b.push((h+256).toString(16).substr(1));const _=function(e,t,n){var i=(e=e||{}).random||(e.rng||g)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){n=n||0;for(var r=0;r<16;++r)t[n+r]=i[r];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(b[e[t+0]]+b[e[t+1]]+b[e[t+2]]+b[e[t+3]]+"-"+b[e[t+4]]+b[e[t+5]]+"-"+b[e[t+6]]+b[e[t+7]]+"-"+b[e[t+8]]+b[e[t+9]]+"-"+b[e[t+10]]+b[e[t+11]]+b[e[t+12]]+b[e[t+13]]+b[e[t+14]]+b[e[t+15]]).toLowerCase();if(!y(n))throw TypeError("Stringified UUID is invalid");return n}(i)};var w=n(8138),R=n.n(w),x=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))};i.default.use(s.ZP);const A={images:nodecg.Replicant("assets:media-box-images"),prizes:nodecg.Replicant("prizes"),settings:nodecg.Replicant("mediaBox")},z=new s.ZP.Store({state:{images:[],prizes:[],disableSave:!1,newRotation:[]},mutations:{setState(e,{name:t,val:n}){i.default.set(e,t,n)},updateNewRotation(e,t){i.default.set(e,"newRotation",t)}},actions:{save({state:e}){return x(this,void 0,void 0,(function*(){i.default.set(e,"disableSave",!0),void 0!==A.settings.value&&(A.settings.value.rotation=R()(e.newRotation)),yield new Promise((e=>setTimeout(e,1e3))),i.default.set(e,"disableSave",!1)}))}}});function P(e){return["donation","subscription","cheer"].includes(e)}function S(e){let t;return"prize_generic"===e.type?{name:"Generic Prize Slide"}:("image"===e.type?t=z.state.images.find((t=>t.sum===e.mediaUUID)):"prize"===e.type&&(t=z.state.prizes.find((t=>t.id.toString()===e.mediaUUID))),t?{name:t.name}:{})}function j(e,t){return{type:e,id:_(),mediaUUID:t||"-1",seconds:60}}function O(e){return!!(e&&e.startTime&&e.endTime&&Date.now()>e.startTime&&Date.now()<e.endTime)}Object.keys(A).forEach((e=>{A[e].on("change",(t=>{z.commit("setState",{name:e,val:R()(t)})}))}));var C=n(2295),D=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let T=class extends o.w3{clone(e){return j("image",e.sum)}};D([l],T.prototype,"images",void 0),T=D([(0,o.wA)({components:{Draggable:f(),MediaCard:C.Z}})],T);const k=T;var M=n(5440),Z=n(7618),I=n.n(Z),V=n(5264),U=(0,M.Z)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar-title",[e._v("\n    Available Images\n  ")]),e._v(" "),e.images.length?n("draggable",{attrs:{list:e.images,group:{name:"media",pull:"clone",put:!1},sort:!1,clone:e.clone}},e._l(e.images,(function(t){return n("media-card",{key:t.sum,attrs:{title:t.name}},[e._v("\n      "+e._s(t.name)+"\n    ")])})),1):n("media-card",{style:{"font-style":"italic","white-space":"unset"}},[e._v('\n    Add images under "Assets" > "esa-layouts" > "Media Box Images".\n  ')])],1)}),[],!1,null,null,null);const E=U.exports;I()(U,{VToolbarTitle:V.qW});var $=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let N=class extends o.w3{};$([(0,o.fI)(Boolean)],N.prototype,"isApplicable",void 0),N=$([o.wA],N);const G=N;var L=n(2244),B=n(4219),q=(0,M.Z)(G,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isApplicable?n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-icon",e._g({},i),[e._v("\n      mdi-check\n    ")])]}}],null,!1,2874576485)},[e._v(" "),n("span",[e._v("Applicable")])]):n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on;return[n("v-icon",e._g({},i),[e._v("\n      mdi-close\n    ")])]}}])},[e._v(" "),n("span",[e._v("Not Currently Applicable")])])}),[],!1,null,null,null);const F=q.exports;I()(q,{VIcon:L.Z,VTooltip:B.Z});var W=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let H=class extends o.w3{constructor(){super(...arguments),this.isPrizeApplicable=O}clone(e){return j("prize",e.id.toString())}cloneGeneric(){return j("prize_generic")}};W([l],H.prototype,"prizes",void 0),H=W([(0,o.wA)({components:{Draggable:f(),MediaCard:C.Z,ApplicableIcon:F}})],H);const J=H;var K=(0,M.Z)(J,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar-title",[e._v("\n    Available Prizes\n  ")]),e._v(" "),e.prizes.length?n("draggable",{attrs:{list:e.prizes,group:{name:"media",pull:"clone",put:!1},sort:!1,clone:e.clone}},e._l(e.prizes,(function(t){return n("media-card",{key:t.id,staticClass:"d-flex"},[n("applicable-icon",{attrs:{"is-applicable":e.isPrizeApplicable(t)}}),e._v(" "),n("div",{staticClass:"flex-grow-1",attrs:{title:t.name}},[e._v("\n        "+e._s(t.name)+"\n      ")])],1)})),1):n("media-card",{style:{"font-style":"italic"}},[e._v("\n    No prizes available from the tracker.\n  ")]),e._v(" "),n("draggable",{attrs:{list:["generic_prize"],group:{name:"media",pull:"clone",put:!1},sort:!1,clone:e.cloneGeneric}},[n("media-card",{key:"generic_prize",staticClass:"d-flex",style:{"font-weight":"500"}},[n("applicable-icon",{attrs:{"is-applicable":!!e.prizes.filter((function(t){return e.isPrizeApplicable(t)})).length}}),e._v(" "),n("div",{staticClass:"flex-grow-1",attrs:{title:"Generic Prize Slide"}},[e._v("\n        Generic Prize Slide\n      ")])],1)],1)],1)}),[],!1,null,null,null);const Q=K.exports;I()(K,{VToolbarTitle:V.qW});var X=n(5043),Y=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let ee=class extends o.w3{constructor(){super(...arguments),this.getMediaDetails=S,this.isPrizeApplicable=O}created(){this.newRotation=R()(this.settings.rotation)}isApplicable(e){return"image"===e.type?!!this.images.find((t=>t.sum===e.mediaUUID)):"prize_generic"===e.type?!!this.prizes.filter((e=>O(e))).length:"prize"===e.type&&O(this.prizes.find((t=>t.id.toString()===e.mediaUUID)))}parseSeconds(e){this.newRotation[e].seconds=Number(this.newRotation[e].seconds)}remove(e){this.newRotation.splice(e,1)}};Y([l],ee.prototype,"images",void 0),Y([l],ee.prototype,"prizes",void 0),Y([l],ee.prototype,"settings",void 0),Y([(0,X.H)("updateNewRotation","newRotation")],ee.prototype,"newRotation",void 0),ee=Y([(0,o.wA)({components:{Draggable:f(),MediaCard:C.Z,ApplicableIcon:F}})],ee);const te=ee;var ne=n(373),ie=(0,M.Z)(te,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-toolbar-title",[e._v("\n    Rotation\n  ")]),e._v(" "),e.newRotation.length?e._e():n("media-card",{style:{"font-style":"italic"}},[e._v("\n    Drag elements from above to here to configure.\n  ")]),e._v(" "),n("draggable",{attrs:{group:"media"},model:{value:e.newRotation,callback:function(t){e.newRotation=t},expression:"newRotation"}},e._l(e.newRotation,(function(t,i){return n("media-card",{key:t.id,staticClass:"d-flex"},[n("applicable-icon",{attrs:{"is-applicable":e.isApplicable(t)}}),e._v(" "),n("div",{staticClass:"d-flex align-center justify-center flex-grow-1",style:{overflow:"hidden","font-weight":"prize_generic"===t.type?"500":void 0,"font-style":e.getMediaDetails(t).name?void 0:"italic"},attrs:{title:e.getMediaDetails(t).name}},[e._v("\n        "+e._s(e.getMediaDetails(t).name||"Could not find media name.")+"\n      ")]),e._v(" "),n("div",{staticClass:"d-flex"},[n("v-text-field",{staticClass:"pa-0 ma-0",style:{width:"40px !important"},attrs:{type:"number","hide-details":"",dense:""},on:{input:function(t){return e.parseSeconds(i)}},model:{value:t.seconds,callback:function(n){e.$set(t,"seconds",n)},expression:"media.seconds"}}),e._v(" "),n("v-icon",{on:{click:function(t){return e.remove(i)}}},[e._v("\n          mdi-delete\n        ")])],1)],1)})),1)],1)}),[],!1,null,null,null);const re=ie.exports;I()(ie,{VIcon:L.Z,VTextField:ne.Z,VToolbarTitle:V.qW});var oe=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let ae=class extends o.w3{constructor(){super(...arguments),this.getMediaDetails=S,this.isAlertType=P}mediaLength(e){var t;return e&&P(e.type)?10:(null===(t=this.settings.rotationApplicable.find((t=>t.id===(null==e?void 0:e.id))))||void 0===t?void 0:t.seconds)||0}timeRemaining(e){return Math.round(this.mediaLength(e)-((null==e?void 0:e.timeElapsed)||0)/1e3)}position(e){const t=null==e?void 0:e.index;return"number"==typeof t?t+1:-1}};oe([l],ae.prototype,"settings",void 0),ae=oe([o.wA],ae);const se=ae,le=(0,M.Z)(se,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"Status"},[e.settings.current?e.settings.current?[n("span",{staticClass:"font-weight-bold"},[e._v("Current:")]),e._v(" "),e.isAlertType(e.settings.current.type)?[n("span",{style:{"text-transform":"capitalize"}},[e._v("\n          "+e._s(e.settings.current.type)+"\n        ")]),e._v(" Alert\n      ")]:[e._v("\n        "+e._s(e.getMediaDetails(e.settings.current).name)+"\n      ")],e._v(" "),n("br"),e._v(" "),e.isAlertType(e.settings.current.type)?n("span",[e._v("(")]):[e._v("\n        (position "+e._s(e.position(e.settings.current))+"/"+e._s(e.settings.rotationApplicable.length)+",\n      ")],e._v(e._s(e.timeRemaining(e.settings.current))+"/"+e._s(e.mediaLength(e.settings.current))+"s left)\n    ")]:e._e():n("span",{style:{"font-style":"italic"}},[e._v("\n      No media currently displaying.\n    ")])],2),e._v(" "),e.settings.paused?n("div",{staticClass:"Status"},[n("span",{staticClass:"font-weight-bold"},[e._v("Paused:")]),e._v(" "+e._s(e.getMediaDetails(e.settings.paused).name)+"\n    "),n("br"),e._v("(position "+e._s(e.position(e.settings.paused))+"/"+e._s(e.settings.rotationApplicable.length)+",\n    "+e._s(e.timeRemaining(e.settings.paused))+"/"+e._s(e.mediaLength(e.settings.paused))+"s left)\n  ")]):e._e()])}),[],!1,null,"4c16401e",null).exports;var ce=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};let pe=class extends o.w3{};ce([l],pe.prototype,"disableSave",void 0),ce([c],pe.prototype,"save",void 0),pe=ce([(0,o.wA)({components:{AvailableImages:E,AvailablePrizes:Q,Rotation:re,CurrentMediaInfo:le}})],pe);const de=pe;var ue=n(2311),fe=n(6255),ve=(0,M.Z)(de,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",[n("available-images"),e._v(" "),n("available-prizes",{style:{"margin-top":"20px"}}),e._v(" "),n("rotation",{style:{"margin-top":"20px"}}),e._v(" "),n("v-btn",{style:{"margin-top":"20px"},attrs:{loading:e.disableSave,disabled:e.disableSave},on:{click:function(t){return e.save()}}},[e._v("\n    Save\n  ")]),e._v(" "),n("current-media-info",{style:{"margin-top":"10px"}})],1)}),[],!1,null,null,null);const ge=ve.exports;I()(ve,{VApp:ue.Z,VBtn:fe.Z}),x(void 0,void 0,void 0,(function*(){return yield NodeCG.waitForReplicants(...Object.keys(A).map((e=>A[e]))),z})).then((e=>{new i.default({vuetify:r.Z,store:e,el:"#App",render:e=>e(ge)})}))},6070:(e,t,n)=>{n.d(t,{f:()=>o});var i=n(5925),r=n(779);function o(e){return void 0===e&&(e={}),function(t,n){(0,r.l)(e,t,n),(0,i.createDecorator)((function(t,n){(t.props||(t.props={}))[n]=e}))(t,n)}}},779:(e,t,n)=>{n.d(t,{l:()=>r});var i="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function r(e,t,n){if(i&&!Array.isArray(e)&&"function"!=typeof e&&!e.hasOwnProperty("type")&&void 0===e.type){var r=Reflect.getMetadata("design:type",t,n);r!==Object&&(e.type=r)}}},2659:(e,t,n)=>{n.d(t,{wA:()=>r.default,w3:()=>i.default,fI:()=>o.f});var i=n(5803),r=n(5925),o=(n(4807),n(7023),n(5654),n(6070));n(8793)}},t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}n.m=e,n.x=e=>{},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={96:0},t=[[6260,459,730,50,89,567]],i=e=>{},r=(r,o)=>{for(var a,s,[l,c,p,d]=o,u=0,f=[];u<l.length;u++)s=l[u],n.o(e,s)&&e[s]&&f.push(e[s][0]),e[s]=0;for(a in c)n.o(c,a)&&(n.m[a]=c[a]);for(p&&p(n),r&&r(o);f.length;)f.shift()();return d&&t.push.apply(t,d),i()},o=self.webpackChunk=self.webpackChunk||[];function a(){for(var i,r=0;r<t.length;r++){for(var o=t[r],a=!0,s=1;s<o.length;s++){var l=o[s];0!==e[l]&&(a=!1)}a&&(t.splice(r--,1),i=n(n.s=o[0]))}return 0===t.length&&(n.x(),n.x=e=>{}),i}o.forEach(r.bind(null,0)),o.push=r.bind(null,o.push.bind(o));var s=n.x;n.x=()=>(n.x=s||(e=>{}),(i=a)())})(),n.x()})();