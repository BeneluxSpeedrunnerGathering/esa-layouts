(()=>{"use strict";var e={5939:(e,t,o)=>{var n=o(5803),i=o(9459),r=o(2659),l=o(5925),s=o(8586),a=v("computed",s.rn),c=(v("computed",s.Se),v("methods",s.nv)),d=v("methods",s.OI);function v(e,t){function o(o,n){return(0,l.createDecorator)((function(i,r){i[e]||(i[e]={});var l,s=((l={})[r]=o,l);i[e][r]=void 0!==n?t(n,s)[r]:t(s)[r]}))}return function(e,t){if("string"==typeof t){var n=t,i=e;return o(n,void 0)(i,n)}return o(e,function(e){var t=e&&e.namespace;if("string"==typeof t)return"/"!==t[t.length-1]?t+"/":t}(t))}}var u=function(e,t,o,n){var i,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(r<3?i(l):r>3?i(t,o,l):i(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};let p=class extends r.w3{constructor(){super(...arguments),this.searchTerm=null}get filteredVideos(){return this.videos.filter((e=>{const t=this.searchTerm?this.searchTerm.toLowerCase():"";return!t||t&&e.name.toLowerCase().includes(t)})).map((e=>[this.playCount(e.sum),e])).sort().map((e=>e[1]))}playCount(e){return this.videoPlayer.plays[e]||0}};u([a],p.prototype,"videos",void 0),u([a],p.prototype,"videoPlayer",void 0),u([d],p.prototype,"playlistAdd",void 0),p=u([r.wA],p);const h=p;var f=o(5440),y=o(7618),m=o.n(y),g=o(6255),b=o(2244),_=o(373),w=o(5264),x=(0,f.Z)(h,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-toolbar-title",[e._v("\n    Available Videos\n  ")]),e._v(" "),o("div",{style:{"margin-top":"10px"}},[e.videos.length?[o("v-text-field",{attrs:{filled:"",clearable:"",label:"Search...","append-icon":"mdi-magnify",messages:"\n          "+e.filteredVideos.length+" video"+(1===e.filteredVideos.length?"":"s")+" found.\n        "},model:{value:e.searchTerm,callback:function(t){e.searchTerm=t},expression:"searchTerm"}}),e._v(" "),o("div",{style:{height:"250px","overflow-y":"scroll","overflow-x":"hidden",margin:0,padding:"10px"}},e._l(e.filteredVideos,(function(t){return o("div",{key:t.sum,staticClass:"d-flex align-center",style:{margin:"5px","margin-left":0},attrs:{value:t.sum}},[o("div",{staticClass:"d-flex align-center",style:{"margin-right":"10px"}},[o("v-btn",{style:{"margin-right":"10px"},attrs:{icon:"",outlined:"",small:""},on:{click:function(o){return e.playlistAdd(t.sum)}}},[o("v-icon",{attrs:{small:""}},[e._v("\n                mdi-playlist-plus\n              ")])],1),e._v(" "),o("v-icon",[e._v("\n              mdi-play\n            ")]),e._v(" "),o("div",{style:{width:"25px","text-align":"center"}},[e._v("\n              "+e._s(e.playCount(t.sum))+"\n            ")])],1),e._v(" "),o("div",{attrs:{title:t.name}},[e._v("\n            "+e._s(t.name)+"\n          ")])])})),0)]:o("span",{style:{"font-style":"italic"}},[e._v('\n      Add videos under "Assets" > "esa-layouts" > "Videos".\n    ')])],2)],1)}),[],!1,null,null,null);const P=x.exports;m()(x,{VBtn:g.Z,VIcon:b.Z,VTextField:_.Z,VToolbarTitle:w.qW});var C=o(5043),R=o(4048),S=o.n(R),$=o(2295),j=function(e,t,o,n){var i,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(r<3?i(l):r>3?i(t,o,l):i(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};let A=class extends r.w3{getName(e){var t;return null===(t=this.videos.find((t=>t.sum===e)))||void 0===t?void 0:t.name}onVideoPlayerChange(){this.localEdits||this.playlistRefresh()}};j([a],A.prototype,"videos",void 0),j([a],A.prototype,"videoPlayer",void 0),j([(0,C.H)("updateNewPlaylist","newPlaylist")],A.prototype,"newPlaylist",void 0),j([a],A.prototype,"localEdits",void 0),j([d],A.prototype,"playlistRemove",void 0),j([d],A.prototype,"playlistRefresh",void 0),j([(0,r.RL)("videoPlayer",{immediate:!0})],A.prototype,"onVideoPlayerChange",null),A=j([(0,r.wA)({components:{Draggable:S(),MediaCard:$.Z}})],A);const T=A;var Z=o(690);const O=g.Z;var B=o(5095),E=o(9085),V=o(9405);const k=n.default.extend({name:"transitionable",props:{mode:String,origin:String,transition:String}});var I=o(6248),D=o(8298);const L=(0,I.Z)(Z.Z,E.Z,k).extend({name:"v-alert",props:{border:{type:String,validator:e=>["top","right","bottom","left"].includes(e)},closeLabel:{type:String,default:"$vuetify.close"},coloredBorder:Boolean,dense:Boolean,dismissible:Boolean,closeIcon:{type:String,default:"$cancel"},icon:{default:"",type:[Boolean,String],validator:e=>"string"==typeof e||!1===e},outlined:Boolean,prominent:Boolean,text:Boolean,type:{type:String,validator:e=>["info","error","success","warning"].includes(e)},value:{type:Boolean,default:!0}},computed:{__cachedBorder(){if(!this.border)return null;let e={staticClass:"v-alert__border",class:{[`v-alert__border--${this.border}`]:!0}};return this.coloredBorder&&(e=this.setBackgroundColor(this.computedColor,e),e.class["v-alert__border--has-color"]=!0),this.$createElement("div",e)},__cachedDismissible(){if(!this.dismissible)return null;const e=this.iconColor;return this.$createElement(O,{staticClass:"v-alert__dismissible",props:{color:e,icon:!0,small:!0},attrs:{"aria-label":this.$vuetify.lang.t(this.closeLabel)},on:{click:()=>this.isActive=!1}},[this.$createElement(B.Z,{props:{color:e}},this.closeIcon)])},__cachedIcon(){return this.computedIcon?this.$createElement(B.Z,{staticClass:"v-alert__icon",props:{color:this.iconColor}},this.computedIcon):null},classes(){const e={...Z.Z.options.computed.classes.call(this),"v-alert--border":Boolean(this.border),"v-alert--dense":this.dense,"v-alert--outlined":this.outlined,"v-alert--prominent":this.prominent,"v-alert--text":this.text};return this.border&&(e[`v-alert--border-${this.border}`]=!0),e},computedColor(){return this.color||this.type},computedIcon(){return!1!==this.icon&&("string"==typeof this.icon&&this.icon?this.icon:!!["error","info","success","warning"].includes(this.type)&&`$${this.type}`)},hasColoredIcon(){return this.hasText||Boolean(this.border)&&this.coloredBorder},hasText(){return this.text||this.outlined},iconColor(){return this.hasColoredIcon?this.computedColor:void 0},isDark(){return!(!this.type||this.coloredBorder||this.outlined)||V.Z.options.computed.isDark.call(this)}},created(){this.$attrs.hasOwnProperty("outline")&&(0,D.fK)("outline","outlined",this)},methods:{genWrapper(){const e=[this.$slots.prepend||this.__cachedIcon,this.genContent(),this.__cachedBorder,this.$slots.append,this.$scopedSlots.close?this.$scopedSlots.close({toggle:this.toggle}):this.__cachedDismissible];return this.$createElement("div",{staticClass:"v-alert__wrapper"},e)},genContent(){return this.$createElement("div",{staticClass:"v-alert__content"},this.$slots.default)},genAlert(){let e={staticClass:"v-alert",attrs:{role:"alert"},on:this.listeners$,class:this.classes,style:this.styles,directives:[{name:"show",value:this.isActive}]};return this.coloredBorder||(e=(this.hasText?this.setTextColor:this.setBackgroundColor)(this.computedColor,e)),this.$createElement("div",e,[this.genWrapper()])},toggle(){this.isActive=!this.isActive}},render(e){const t=this.genAlert();return this.transition?e("transition",{props:{name:this.transition,origin:this.origin,mode:this.mode}},[t]):t}});var N=(0,f.Z)(T,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-toolbar-title",[e._v("\n    Playlist\n  ")]),e._v(" "),o("v-alert",{directives:[{name:"show",rawName:"v-show",value:e.localEdits,expression:"localEdits"}],style:{"margin-top":"5px"},attrs:{type:"warning",dense:""}},[e._v("\n    Local changes have been made.\n  ")]),e._v(" "),e.newPlaylist.length?e._e():o("media-card",{style:{"font-style":"italic"}},[e._v("\n    Add videos using the list above.\n  ")]),e._v(" "),o("draggable",{model:{value:e.newPlaylist,callback:function(t){e.newPlaylist=t},expression:"newPlaylist"}},e._l(e.newPlaylist,(function(t,n){return o("media-card",{key:t+"_"+n,staticClass:"d-flex"},[o("div",{staticClass:"d-flex justify-center flex-grow-1",style:{overflow:"hidden","font-style":e.getName(t)?void 0:"italic"}},[e._v("\n        "+e._s(e.getName(t)||"Could not find video name.")+"\n      ")]),e._v(" "),o("v-icon",{on:{click:function(t){return e.playlistRemove(n)}}},[e._v("\n        mdi-delete\n      ")])],1)})),1)],1)}),[],!1,null,null,null);const M=N.exports;m()(N,{VAlert:L,VIcon:b.Z,VToolbarTitle:w.qW});var W=function(e,t,o,n){var i,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(r<3?i(l):r>3?i(t,o,l):i(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};let F=class extends r.w3{get name(){var e;return null===(e=this.videos.find((e=>e.sum===this.videoPlayer.current)))||void 0===e?void 0:e.name}};W([a],F.prototype,"videos",void 0),W([a],F.prototype,"videoPlayer",void 0),F=W([r.wA],F);const q=F,G=(0,f.Z)(q,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"show",rawName:"v-show",value:e.name,expression:"name"}],style:{"text-align":"center"}},[o("span",{staticClass:"font-weight-bold"},[e._v("Currently Playing:")]),e._v(" "),o("br"),e._v(e._s(e.name)+"\n")])}),[],!1,null,null,null).exports;var H=function(e,t,o,n){var i,r=arguments.length,l=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,o,n);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(l=(r<3?i(l):r>3?i(t,o,l):i(t,o))||l);return r>3&&l&&Object.defineProperty(t,o,l),l};let K=class extends r.w3{};H([a],K.prototype,"disableSave",void 0),H([d],K.prototype,"playlistRefresh",void 0),H([c],K.prototype,"save",void 0),K=H([(0,r.wA)({components:{AvailableVideos:P,Playlist:M,CurrentVideoInfo:G}})],K);const z=K;var J=o(2311),Q=o(4219),U=(0,f.Z)(z,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("available-videos"),e._v(" "),o("playlist",{style:{"margin-top":"20px"}}),e._v(" "),o("div",{staticClass:"d-flex",style:{"margin-top":"20px"}},[o("v-btn",{staticClass:"flex-grow-1",attrs:{loading:e.disableSave,disabled:e.disableSave},on:{click:function(t){return e.save()}}},[e._v("\n      Save\n    ")]),e._v(" "),o("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[o("v-btn",e._g({style:{"margin-left":"5px"},on:{click:function(t){return e.playlistRefresh()}}},n),[o("v-icon",[e._v("\n            mdi-refresh\n          ")])],1)]}}])},[e._v(" "),o("span",[e._v("Revert Local Changes")])])],1),e._v(" "),o("current-video-info",{style:{"margin-top":"10px"}})],1)}),[],!1,null,null,null);const X=U.exports;m()(U,{VApp:J.Z,VBtn:g.Z,VIcon:b.Z,VTooltip:Q.Z});var Y=o(8138),ee=o.n(Y),te=function(e,t,o,n){return new(o||(o=Promise))((function(i,r){function l(e){try{a(n.next(e))}catch(e){r(e)}}function s(e){try{a(n.throw(e))}catch(e){r(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,s)}a((n=n.apply(e,t||[])).next())}))};let oe;n.default.use(s.ZP);const ne={videoPlayer:nodecg.Replicant("videoPlayer"),videos:nodecg.Replicant("assets:videos")};function ie(e){n.default.set(e.state,"localEdits",!0),window.clearTimeout(oe),oe=window.setTimeout((()=>{e.commit("playlistRefresh")}),3e4)}const re=new s.ZP.Store({state:{disableSave:!1,localEdits:!1,newPlaylist:[]},mutations:{setState(e,{name:t,val:o}){n.default.set(e,t,o)},updateNewPlaylist(e,t){n.default.set(e,"newPlaylist",t),ie(re)},playlistAdd(e,t){e.newPlaylist.push(t),ie(re)},playlistRemove(e,t){e.newPlaylist.splice(t,1),ie(re)},playlistRefresh(e){var t;n.default.set(e,"newPlaylist",ee()((null===(t=ne.videoPlayer.value)||void 0===t?void 0:t.playlist)||[])),n.default.set(e,"localEdits",!1)}},actions:{save({state:e}){return te(this,void 0,void 0,(function*(){n.default.set(e,"disableSave",!0),void 0!==ne.videoPlayer.value&&(ne.videoPlayer.value.playlist=ee()(e.newPlaylist)),yield new Promise((e=>setTimeout(e,1e3))),n.default.set(e,"disableSave",!1),window.clearTimeout(oe),n.default.set(e,"localEdits",!1)}))}}});Object.keys(ne).forEach((e=>{ne[e].on("change",(t=>{re.commit("setState",{name:e,val:ee()(t)})}))})),te(void 0,void 0,void 0,(function*(){return yield NodeCG.waitForReplicants(...Object.keys(ne).map((e=>ne[e]))),re})).then((e=>{new n.default({vuetify:i.Z,store:e,el:"#App",render:e=>e(X)})}))},6070:(e,t,o)=>{o(779)},5612:(e,t,o)=>{o.d(t,{R:()=>i});var n=o(5925);function i(e,t){void 0===t&&(t={});var o=t.deep,i=void 0!==o&&o,r=t.immediate,l=void 0!==r&&r;return(0,n.createDecorator)((function(t,o){"object"!=typeof t.watch&&(t.watch=Object.create(null));var n=t.watch;"object"!=typeof n[e]||Array.isArray(n[e])?void 0===n[e]&&(n[e]=[]):n[e]=[n[e]],n[e].push({handler:o,deep:i,immediate:l})}))}},779:(e,t,o)=>{"undefined"!=typeof Reflect&&Reflect.getMetadata},2659:(e,t,o)=>{o.d(t,{wA:()=>i.default,w3:()=>n.default,RL:()=>r.R});var n=o(5803),i=o(5925),r=(o(4807),o(7023),o(5654),o(6070),o(8793),o(5612))}},t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,o),i.exports}o.m=e,o.x=e=>{},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={426:0},t=[[5939,459,730,50,89,567]],n=e=>{},i=(i,r)=>{for(var l,s,[a,c,d,v]=r,u=0,p=[];u<a.length;u++)s=a[u],o.o(e,s)&&e[s]&&p.push(e[s][0]),e[s]=0;for(l in c)o.o(c,l)&&(o.m[l]=c[l]);for(d&&d(o),i&&i(r);p.length;)p.shift()();return v&&t.push.apply(t,v),n()},r=self.webpackChunk=self.webpackChunk||[];function l(){for(var n,i=0;i<t.length;i++){for(var r=t[i],l=!0,s=1;s<r.length;s++){var a=r[s];0!==e[a]&&(l=!1)}l&&(t.splice(i--,1),n=o(o.s=r[0]))}return 0===t.length&&(o.x(),o.x=e=>{}),n}r.forEach(i.bind(null,0)),r.push=i.bind(null,r.push.bind(r));var s=o.x;o.x=()=>(o.x=s||(e=>{}),(n=l)())})(),o.x()})();